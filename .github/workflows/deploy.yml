name: Deploy to PythonAnywhere

on:
    push:
        branches:
            - main # Or 'master' depending on your branch name

jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v3

            - name: Deploy to PythonAnywhere
              run: |
                  curl -X POST "https://www.pythonanywhere.com/api/v0/user/${{ secrets.PA_USERNAME }}/webapps/${{ secrets.PA_USERNAME }}.pythonanywhere.com/reload/" \
                  -H "Authorization: Token ${{ secrets.PA_API_TOKEN }}"
